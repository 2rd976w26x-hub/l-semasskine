:root {
  --bg: #0b1220;
  --card: #111a2c;
  --soft: #1a2742;
  --text: #e8eefc;
  --muted: #a9b6d6;
  --good: #38d39f;
  --bad: #ff6b6b;
  --accent: #7aa2ff;
  --accent2: #ffd36a;
  --shadow: 0 10px 30px rgba(0,0,0,.35);
  --radius: 18px;
}

* { box-sizing: border-box; }
body {
  margin: 0;
  font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
  background: radial-gradient(1200px 800px at 20% 10%, #1a2a55 0%, var(--bg) 55%) fixed;
  color: var(--text);
}
a { color: var(--accent); text-decoration: none; }
.container {
  max-width: 980px;
  margin: 0 auto;
  padding: 22px;
}
.topbar {
  display:flex; align-items:center; justify-content:space-between;
  gap: 12px;
  padding: 14px 18px;
  background: rgba(17,26,44,.72);
  backdrop-filter: blur(10px);
  border: 1px solid rgba(255,255,255,.08);
  border-radius: var(--radius);
  box-shadow: var(--shadow);
}
.brand {
  display:flex; align-items:center; gap:10px;
}
.logo {
  width: 36px; height: 36px;
  border-radius: 12px;
  background: linear-gradient(135deg, var(--accent), var(--accent2));
  box-shadow: 0 10px 22px rgba(122,162,255,.25);
}
.brand h1 {
  font-size: 18px; margin: 0;
}
.badge {
  font-size: 12px;
  padding: 4px 10px;
  border-radius: 999px;
  background: rgba(255,255,255,.08);
  border: 1px solid rgba(255,255,255,.10);
  color: var(--muted);
}
.grid {
  display:grid;
  grid-template-columns: 1fr;
  gap: 16px;
  margin-top: 18px;
}
@media (min-width: 820px) {
  .grid.two { grid-template-columns: 1.1fr .9fr; }
  .grid.three { grid-template-columns: 1fr 1fr 1fr; }
}
.card {
  background: rgba(17,26,44,.78);
  border: 1px solid rgba(255,255,255,.08);
  border-radius: var(--radius);
  box-shadow: var(--shadow);
  padding: 18px;
}
.card h2 {
  margin: 0 0 10px 0;
  font-size: 16px;
}
.muted { color: var(--muted); }
.row { display:flex; gap: 12px; align-items:center; flex-wrap: wrap; }
.field {
  display:flex; flex-direction:column; gap: 6px;
  width: 100%;
}
input, select {
  padding: 12px 12px;
  border-radius: 14px;
  border: 1px solid rgba(255,255,255,.10);
  background: rgba(0,0,0,.25);
  color: var(--text);
  outline: none;
}
button {
  cursor: pointer;
  padding: 12px 14px;
  border-radius: 14px;
  border: 1px solid rgba(255,255,255,.10);
  background: rgba(122,162,255,.22);
  color: var(--text);
  font-weight: 600;
}
button.primary {
  background: linear-gradient(135deg, rgba(122,162,255,.95), rgba(255,211,106,.90));
  color: #0b1220;
  border: none;
}
button.ghost {
  background: rgba(255,255,255,.06);
}
button.danger {
  background: rgba(255,107,107,.18);
}
.kpi {
  display:flex; gap: 10px; align-items:baseline;
}
.kpi .num { font-size: 34px; font-weight: 800; }
.kpi .label { color: var(--muted); }

.wordBox {
  display:flex;
  flex-direction:column;
  align-items:center;
  justify-content:center;
  gap: 12px;
  min-height: 280px;
}
.word {
  font-size: 64px;
  font-weight: 900;
  letter-spacing: .5px;
}
.fade {
  animation: fadeOut var(--fadeDur, 2s) linear forwards;
}
@keyframes fadeOut {
  to { opacity: 0.15; filter: blur(1px); }
}
.progress {
  width: 100%;
  height: 14px;
  background: rgba(255,255,255,.08);
  border-radius: 999px;
  overflow:hidden;
  border: 1px solid rgba(255,255,255,.08);
}
.progress > div {
  height: 100%;
  width: 0%;
  background: linear-gradient(90deg, rgba(56,211,159,.95), rgba(122,162,255,.95));
}
.toast {
  margin-top: 12px;
  padding: 10px 12px;
  border-radius: 14px;
  border: 1px solid rgba(255,255,255,.10);
  background: rgba(0,0,0,.22);
}
.toast.good { border-color: rgba(56,211,159,.45); }
.toast.bad { border-color: rgba(255,107,107,.45); }
.table {
  width: 100%;
  border-collapse: collapse;
  font-size: 14px;
}
.table th, .table td {
  padding: 10px 10px;
  border-bottom: 1px solid rgba(255,255,255,.08);
  text-align: left;
}
.small { font-size: 12px; }
.footer {
  margin-top: 18px;
  color: var(--muted);
  font-size: 12px;
  text-align:center;
}


.thwrap{ display:flex; align-items:center; justify-content:space-between; gap:6px; }
.thlabel{ display:inline-flex; align-items:center; gap:6px; }
.filterBtn{
  border:1px solid rgba(255,255,255,.15);
  background:transparent;
  color:var(--text);
  border-radius:10px;
  padding:2px 6px;
  cursor:pointer;
  font-size:12px;
  line-height:16px;
}
.filterBtn:hover{ background:rgba(255,255,255,.06); }

.chip{
  display:inline-flex;
  align-items:center;
  gap:6px;
  padding:2px 8px;
  border-radius:999px;
  border:1px solid rgba(255,255,255,.15);
  background:rgba(255,255,255,.04);
  font-size:12px;
}
.chipX{
  border:0;
  background:transparent;
  color:var(--text);
  cursor:pointer;
  font-size:14px;
  line-height:12px;
}
.tooltipHint{
  display:inline-block;
  margin-left:6px;
  padding:0 6px;
  border-radius:999px;
  border:1px solid rgba(255,255,255,.15);
}


.funnelIcon{ width:14px; height:14px; display:block; fill: currentColor; opacity:.9; }
.filterBtn{ display:inline-flex; align-items:center; justify-content:center; }

.filterMenu{
  position:absolute;
  z-index:9999;
  width: 280px;
  padding:10px;
  border-radius:16px;
  border:1px solid rgba(255,255,255,.15);
  background: rgba(20,20,24,.98);
  box-shadow: 0 10px 30px rgba(0,0,0,.35);
}
.filterMenuHead{ display:flex; justify-content:space-between; align-items:center; gap:10px; }
.filterMenuList{
  margin-top:8px;
  max-height: 240px;
  overflow-y: auto;
  border:1px solid rgba(255,255,255,.10);
  border-radius:12px;
  padding:6px;
}
.filterMenuItem{
  width:100%;
  border:0;
  background:transparent;
  color:var(--text);
  padding:6px 8px;
  border-radius:10px;
  display:flex;
  justify-content:space-between;
  gap:10px;
  cursor:pointer;
  text-align:left;
}
.filterMenuItem:hover{ background: rgba(255,255,255,.06); }

.filterMenuFoot{ margin-top:10px; display:flex; justify-content:space-between; gap:8px; }

.modalOverlay{
  position:fixed;
  inset:0;
  z-index:10000;
  background: rgba(0,0,0,.5);
  display:flex;
  align-items:center;
  justify-content:center;
  padding:16px;
}
.modalCard{
  width: min(640px, 96vw);
  border-radius:18px;
  border:1px solid rgba(255,255,255,.15);
  background: rgba(20,20,24,.98);
  padding:14px;
  box-shadow: 0 20px 60px rgba(0,0,0,.45);
}
.mono{ font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace; }


.clearFiltersBtn{
  position:relative;
  border:1px solid rgba(255,255,255,.15);
  background:transparent;
  color:var(--text);
  border-radius:12px;
  padding:6px 10px;
  cursor:pointer;
  display:inline-flex;
  align-items:center;
  justify-content:center;
}
.clearFiltersBtn:hover{ background:rgba(255,255,255,.06); }
.redX{
  position:absolute;
  inset:0;
  display:flex;
  align-items:center;
  justify-content:center;
  color:#ff4d4d;
  pointer-events:none;
  opacity:.9;
}
.funnelIcon{ width:14px; height:14px; display:block; fill: currentColor; opacity:.9; }
.xIcon{ width:18px; height:18px; }

.filterBtn{ display:inline-flex; align-items:center; justify-content:center; }

.filterMenu{
  position:absolute;
  z-index:9999;
  width: 340px;
  padding:10px;
  border-radius:16px;
  border:1px solid rgba(255,255,255,.15);
  background: rgba(20,20,24,.98);
  box-shadow: 0 10px 30px rgba(0,0,0,.35);
}
.filterMenuHead{ display:flex; justify-content:space-between; align-items:center; gap:10px; }
.filterMenuHelp{ margin-top:6px; }

.filterMenuTableWrap{
  margin-top:10px;
  max-height: 320px;
  overflow:auto;
  border:1px solid rgba(255,255,255,.10);
  border-radius:12px;
}
.fmTable{ width:100%; border-collapse:collapse; }
.fmTh{
  position:sticky;
  top:0;
  background: rgba(20,20,24,.98);
  text-align:left;
  font-size:12px;
  padding:8px 10px;
  border-bottom:1px solid rgba(255,255,255,.10);
}
.fmCell{
  padding:8px 10px;
  border-bottom:1px solid rgba(255,255,255,.06);
}
.fmRow{ cursor:pointer; }
.fmRow:hover .fmCell{ background: rgba(255,255,255,.06); }
.fmSep td{ padding:0; border-bottom:1px solid rgba(255,255,255,.12); height:6px; }
.fmCustom .fmCell{ background: rgba(255,255,255,.03); }

.modalOverlay{
  position:fixed;
  inset:0;
  z-index:10000;
  background: rgba(0,0,0,.5);
  display:flex;
  align-items:center;
  justify-content:center;
  padding:16px;
}
.modalCard{
  width: min(640px, 96vw);
  border-radius:18px;
  border:1px solid rgba(255,255,255,.15);
  background: rgba(20,20,24,.98);
  padding:14px;
  box-shadow: 0 20px 60px rgba(0,0,0,.45);
}
.mono{ font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace; }


.fmCheckCell{ width:34px; }
.fmCheck{ width:16px; height:16px; }
.fmValCell label{ cursor:pointer; display:block; width:100%; }


/* --- Table grid upgrade (v0.2.1.2.2) --- */
.table{
  width:100%;
  border-collapse:collapse;
  table-layout:fixed;
}
.table th, .table td{
  padding:10px 12px;
  border-bottom:1px solid rgba(255,255,255,.15);
  border-right:1px solid rgba(255,255,255,.10);
}
.table th:last-child, .table td:last-child{ border-right:none; }
.table thead th{
  background: rgba(255,255,255,.04);
  border-bottom:2px solid rgba(255,255,255,.25);
  font-weight:600;
}
.table tbody tr:hover{ background: rgba(255,255,255,.05); }
.table tbody tr:nth-child(even){ background: rgba(255,255,255,.02); }


/* thwrap alignment fix (v0.2.1.2.2) */
.thwrap{ display:flex; align-items:center; justify-content:space-between; gap:10px; width:100%; }
.filterBtn{ flex:0 0 auto; }


/* --- Table text wrapping + column sizing (v0.2.1.2.2) --- */
.table{ table-layout: auto; } /* allow columns to grow naturally */

.table th, .table td{
  white-space: normal;
  overflow-wrap: anywhere;
  word-break: break-word;
}

/* Utility fixed-width columns when used */
.col-idx{ width: 52px; }
.col-ok{ width: 64px; text-align:center; }
.col-niv{ width: 72px; }
.col-ts{ width: 190px; }
.col-actions{ width: 120px; }


/* --- Result table column widths (v0.2.1.2.2) --- */
.table.resTable { table-layout: fixed; }
.table.resTable th, .table.resTable td { vertical-align: middle; }
.table.resTable th { white-space: nowrap; } /* keep headers on one line */
.table.resTable td { white-space: normal; overflow-wrap: anywhere; }

.table.resTable .col-idx { width: 56px; text-align: right; }
.table.resTable .col-word { width: 170px; }
.table.resTable .col-heard { width: 260px; }   /* room for diagnostics text */
.table.resTable .col-ok { width: 90px; text-align: center; }
.table.resTable .col-action { width: 120px; text-align: center; }

.table.resTable .btn { white-space: nowrap; } /* keep 'Fejlmeld' on one line */

/* Allow horizontal scroll on small screens instead of breaking layout */
.tableWrap { overflow-x: auto; }
.tableWrap .table { min-width: 720px; }


/* --- Word timing progress bar (v0.2.1.2.2) --- */
.progress.wordTimer { margin-top: 10px; height: 10px; background: rgba(255,255,255,0.12); border-radius: 999px; overflow: hidden; }
#wordBar { height: 100%; width: 0%; transition: width 0.05s linear; background: rgba(255,255,255,0.75); }
#barOverall { height: 100%; width: 0%; transition: width 0.2s ease; background: rgba(255,255,255,0.55); }
#phaseLabel { margin-top: 8px; }
